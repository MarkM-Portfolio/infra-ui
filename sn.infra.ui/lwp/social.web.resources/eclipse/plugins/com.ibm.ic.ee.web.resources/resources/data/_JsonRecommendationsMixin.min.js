/* Copyright IBM Corp. 2015  All Rights Reserved.                    */
define("dojo dojo/_base/declare dojo/_base/lang ic-ee/util/misc ic-incontext/util/misc ic-incontext/util/uri".split(" "),function(g,h,k,l,m,n){(function(){h("com.ibm.social.ee.data._JsonRecommendationsMixin",null,{getValue:function(a,c,b){return c in a?a[c]:b},dataLoaded:function(a,c){var b,e=a.items?a.items:[],f=this._getList(c);for(b=0;b<f.length;b++){var d=f[b];d.isFullyLoaded=!0;d.ds={isDirty:!1,isDeleted:!1,isNew:!1,attributes:{}};d.name=this._getAuthorName(d);d.id=l.getItemId(this._getAuthorId(d));
e.push(d)}e=m.sort(e,"name");this.totalItems=this._getTotalResults(c);if(null===this.totalItems||"undefined"===typeof this.totalItems)this.totalItems=c.totalResuts;f=a.scope?a.scope:g.global;a.onBegin&&a.onBegin.call(f,this.totalItems,a);if(a.onItem)for(b=0;b<e.length;b++)a.onItem.call(f,e[b],a);a.onComplete&&a.onComplete.call(f,a.onItem?null:e,a)},_fetch:function(a){a.count?(a.url=this.url,a.url=n.rewriteUri(this.url,{count:a.count}),this.inherited(arguments,[a])):this.dataLoaded(a,this._getEmptyResult())},
_getRecommendation:function(a){if(a.onItem){var c=a.scope?a.scope:g.global,b=null;this.hasRecommended&&(b={ds:{isDirty:!1,isDeleted:!1,isNew:!1,attributes:{}}},k.mixin(b,this.authUser));a.onItem.apply(c,b?[b]:[])}},fetchItemByIdentity:function(a){},_getEmptyResult:function(){},_getList:function(a){},_getAuthorName:function(a){},_getAuthorId:function(a){},_getTotalResults:function(a){}})})();return _JsonRecommendationsMixin});
