/* Copyright IBM Corp. 2015, 2016  All Rights Reserved.              */

@import "./_definitions.less";

@panel-width: 385px;

@icon-width: 30px;
@icon-height: 30px;
@remove-width: 9px;
@std-margin: 0px;
@std-padding: 0px;
@font-size: 12.8px;
@font-color-primary: #676767;
@font-color-secondary: #292929;
@font-color-link: #325c80;
@link-color: #4178b3;
@selected-color: #e5f3f8;
@content-padding: 2px;
@input-background-color: #f9f9f9;
@input-border-color: #bcbcbc;

@full-width: @panel-width - 2 * 24px;
@line-height: @font-size + 7.2px;

.flipHorizontally() {
  transform: scaleX(-1);
  -moz-transform: scaleX(-1);
  -o-transform: scaleX(-1);
  -webkit-transform: scaleX(-1);
  filter: FlipH;
  -ms-filter: "FlipH";
}

.borderBox() {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.nowrapUsername() {
  .vcard {
    .lotusPerson {
      display: inline-block;
      .floatLeft;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 100%;
    }
    
    .menu_drop_icon {
      .floatLeft;
    }
  }
}

.lotusImagesOff.ics-viewer-open .dijitDialog {
  border: solid 2px;
 }
 
.ics-viewer-open & {
  .ics-dialog-action {
    top: @banner-height;
    bottom: 0;
    overflow: auto;

    background-color: white;
    font-family: "Helvetica Neue", Helvetica, sans-serif;
    padding: 32px;

    .button-container {
      padding: 10px 0;
    }

    .prompt-container {
      margin-bottom: 20px;
      .prompt-bold {
        font-weight: bold;
      }
    }
  }
  .dijitComboBoxMenuPopup {
    z-index: 1002 !important;
  }

  .dijitComboBoxMenuPopup, .dijitTooltipDialogPopup {
    z-index: 1002 !important;
  }

  .dijitDialog {
    z-index: 1002 !important;
    max-width: 600px;

    &.versionDialog, &.commentDialog, &.sharingDialog, &.linkDialog, &.confirmationDialog, &.templateCreateDialog, &.roundtripEditDialog, &.provisionExternalUserDialog, &.flagActionDialog {
      width: auto;
      left: 50%;
      .name-input {
         width: 100%;
      }
      .errorContainer .ics-viewer-messagebox {
          margin-bottom: 20px;
      }
      .button-container {
        .floatRight;
      }
      .dijitDialogTitleBar {
          visibility: visible !important;
          display: block !important;
          background: #325c80;
          padding-bottom: 15px !important;
          padding-left: 20px !important;
          padding-right: 20px !important;
          padding-top: 15px !important;
          .dijitDialogCloseIcon {
            background-image: ~"url(../style/images/Close_View.png)";
            background-position: center;
            height: 16px;
            width: 16px;
            .right(15px);
            top: 15px;
            margin: 0;
          }
      }
      &.restore, &.ics-version-last {
        .deleteOption {
          display: none !important;
        }
      }
      a {
        border: 1px solid #4178be;
        padding: 9px 18px;
        font-size: 1em;
        border-radius:3px;
        text-decoration: none;
        color: #00649d;
      }
      a:hover, a:focus {
        border-width: 2px;
        color: #00649d;

        padding: 8px 17px;

      }
      a:active {
        border-width: 1px;
        background-color: #ebf3fc;
        padding: 8px 17px;
      }
    }
    &.flagActionDialog textarea {
      width: 100%;
    }
    &.linkDialog {
      width: auto;
      .ics-dialog-action .linkContainer {
        margin-bottom:10px;
        .linkLabel {
          margin-bottom: 10px;
          display:block;
          .paddingRight(15px);

        }
        .linkValue {
          width: 375px;
          margin-bottom: 10px;
          text-overflow: ellipsis;
          direction: ltr;
          cursor: text;
        }
      }
      .confirm {
        .floatRight;
        margin-top: 30px;
        .marginRight(3px);
      }
      &.hidePreview .preview {
        display: none !important;
      }
    }
  }
  .dijitDialogUnderlayWrapper {
    z-index: 1001 !important;
  }
}

.ics-viewer .ics-panel-entry.share .remove.action span.lotusAltText.fileViewerIconText {
  top: 0px;
  position: absolute;
}
.ics-viewer.rtl ul.ics-viewer-tabs {
  padding-right: 0px;
  padding-left: 22px;
 }
.ics-viewer.rtl .ics-panel-entry-container .ics-sharing-panel span.lotusAltText.fileViewerIconText {
  position: absolute;
  right: 0px;
  left: -200px;
}

.ics-viewer.rtl .ics-panel-entry-container .ics-sharing-panel.multiAdd-active .multiAddContainer .ics-typeaheadboxmulti-container .actionContainer.actionButton {
  float: left;
}

.ics-viewer.rtl .ics-panel-entry-container .ics-sharing-panel.multiAdd-active .multiAddContainer .ics-typeaheadboxmulti-container .manualAdd {
  margin-right: 8px;
  margin-left: 0px;
}

.ics-viewer {

  .ics-viewer-panel-container {
    position: absolute;
    top: 50px;
    bottom: 0px;
    left: 0;
    right: 0;
    overflow: hidden;
  }

  &.ics-viewer-details-expanded .ics-viewer-panel-container {
    overflow: auto;
  }

  & .ics-viewer-details .ics-panel-entry-container .ics-viewer-stream {
     &.hasNext {
       .loadMoreLink {
         display: inline;
         font-weight: normal;
       }
       .loadContainer {
         margin-top: 5px;
       }
     }
  }
  & .ics-viewer-details .ics-panel-entry.dropdownStream .ics-viewer-stream.loading .streamContent {
    display:block;

  }
  .ics-panel-entry-container {
    .loadingMessage {
      display: none;
    }

    &.loading {
      .loadingMessage {
        display: block;
      }
    }
    .titleContainer {
        width: 100%;
        background-color: #f1f1f1;
    }

    .panelTitle {
      color: #1D3649;
      font-size: 16px;
      font-weight:200;
      margin-bottom: 20px;
      padding: 0 32px;
      background-color: #f1f1f1;

      .panelTitleText {
        height: 65px;
        display: table-cell;
        vertical-align: middle;
      }
    }
    .owner, .folder {
     .panelContent {
        margin-top:15px;
      }
    }
    .reader, .editor, .folder {
        .panelContent{
          margin-bottom:5px;
        }
    }
    .panelContent {
      padding: 0 32px;
      .panelContent{
        padding: 0;
      }
    }

    .versionDialog, .commentDialog, .sharingDialog {
      width: 350px !important;
      height: 350px !important;
      position: fixed !important;
      .left(50%) !important;
      z-index: 1000 !important;
      .errorContainer {
        margin-bottom: 20px;
      }
      .dijitDialogTitleBar {
         visibility: visible !important;
         display: block !important;
      }

      &.restore .deleteOption {
         display: none !important;
      }
   }
   .ics-viewer-stream {
     padding-bottom: 20px;

     .loadMoreLink {
       .hide;
     }

     .loadingMessage {
       .hide;
     }

     &.hasNext {
       .loadMoreLink {
         display: inline;
         font-weight: bold;
       }

       .loadContainer {
         margin-top: 20px;
       }
     }

     &.loading {
       color: @font-color-primary;

        .loadingMessage {
          display: block;
        }

        .loadMoreLink {
         .hide;
       }
      }
   }

  }

  .ics-dialog-action {
    top: @banner-height;
    bottom: 0;
    overflow: auto;

    background-color: white;
    font-family: "Helvetica Neue", Helvetica, sans-serif;
    padding: 32px;
  }

  .ics-panel-entry-container {
    bottom: 0;
    overflow: auto;

    background-color: @panel-background;
    font-family: "Helvetica Neue", Helvetica, sans-serif;
    padding: 0;
    width: 100%;
    box-sizing: border-box;
    -moz-box-sizing: border-box;

    a {
        text-decoration: none;
        color: @link-color;
    }
    
    @-moz-document url-prefix() {
     .ics-viewer .ics-panel-entry-container a {
      margin-left: 1px;
     }
    }
    
    a[disabled] {
      pointer-events: none;
      cursor: default;
      color: #676767;
    }

    .metadata .header1 a {
        color: @link-color;
    }

    .header1, .content {
        color: @font-color-secondary;
    }

    .remove, .header2, .header3, .footer, .actions {
        color: @font-color-secondary;
    }

    .content {
        line-height: @line-height + 6px;
    }

    .footer {
        font-size: 10px;
    }

    .action a, a.action {
        opacity: 0;
        transition: all .25s ease;

        .ie8 &, .ie9 & {
            opacity: 1;
            visibility: hidden;
        }

        &:focus {
            opacity: 100;
        }
    }

    .action {
        display: inline-block;
    }

    .share {
      margin: 0;
      height: 45px;

      &:first-child {
        padding-top: 0;
      }
    }

    .version, .comment {
      margin: 0 0 20px;
    }

    .newCommentBox {
      margin-bottom: 15px;
    }

    .noCommentsContainer {
      display:block;
    }

    .noCommentsContainer.hideNoCommentsContainer {
      display:none;
    }

    .ics-sharing-panel {
      padding-bottom: 30px;

      &.multiAdd-active > * {
         display: none;
      }
      .multiAddContainer {
        margin-bottom: 35px;
      }
      &.multiAdd-active .multiAddContainer {
        display: inherit;

        .ics-typeaheadboxmulti-container {
          width: 100%;

          input {
            width: 100%;
            height: 30px;
            float: left;
            padding-left: 5px;
            text-overflow: ellipsis;
            white-space: nowrap;
            overflow: hidden;
            .lotusui_ie8 & {
              height: auto;
            }

          }
          select {
            height: 30px;
            float: left;
            color: #292929;
            padding-left: 5px;
            .lotusui_ie8 & {
              height: auto;
            }
          }
          .manualAdd {
            margin-left: 8px;
          }
          .manualAdd[disabled] {
            pointer-events: none;
            cursor: default;
            color: #676767;
            border: 1px solid #676767;
            padding: 9px 18px;
            font-size: 1em;
            border-radius:3px;
            text-decoration: none;
            .lotusui_ie8 &{
              padding: 5px 18px;
            }
          }
          .manualAdd, .manualCancel {
            border: 1px solid #4178be;
            padding: 9px 18px;
            font-size: 1em;
            border-radius:3px;
            text-decoration: none;
            color: #00649d;
            .lotusui_ie8 &{
              padding: 5px 18px;
            }
          }
          .manualAdd:hover, .manualAdd:focus, .manualCancel:hover, .manualCancel:focus {
            border-width: 2px;
            color: #00649d;
            padding: 8px 17px;
            .lotusui_ie8 &{
              padding: 4px 17px;
            }
          }
          .manualAdd:active, .manualCancel:active {
            border-width: 1px;
            background-color: #ebf3fc;
            padding: 8px 17px;
            .lotusui_ie8 &{
              padding: 4px 17px;
            }
          }
          .actionContainer.actionButton {
            float: right;
          }
        }
      }
      .ics-viewer-action-multiShare {
        span {
          &.linkText {
            position: relative;
           }
          &.lotusAltText.fileViewerIconText {
            position: relative;
          }
        }
        .externalAddContainer a {
          display: block;
          height: 25px;
        }
        .externalAddContainer img {
          background-image: ~"url(../style/images/Add.png)";
        }
        img {
          float: left;
          background-image: ~"url(../style/images/Add_Black_32.png)";
          width: 28px;
          height: 28px;
        }
      }

      .sharingMsg {
         padding-bottom: 20px;
      }

      &.community-file {
        .communityShareMsg {
          display: block;
        }
      }

      .communityShareMsg {
        display: none;
      }

      .shareLinksStream {
        padding-bottom: 0px;
      }
      .shareLinks {
        .header1 {
          border-bottom: 1px #ddd solid;
        }
      }
      .streamContainer{
        position: relative;
        .panelContent {
          margin-top: 10px;

          .ics-typeaheadbox-container {
            width: 100%;
            .actionContainer a[disabled] {
              pointer-events: none;
              cursor: default;
              color: #676767;
            }
          }
          .ics-typeaheadbox-container select, .ics-typeaheadbox-container input {
            width: 100%;
            height: 30px;
            float:left;
            .lotusui_ie8 & {
              height:auto;
            }
          }
          .ics-typeaheadbox-container input {
            font-style: italic;
            color: @font-color-primary;
            .paddingLeft(10px);

          }
          .ics-typeaheadbox-container input:focus {
            font-style:normal;
          }
          .ics-typeaheadbox-container select {
            color: @font-color-secondary;
            padding-left: 5px;

          }
          .ics-typeaheadbox-container.active .actionContainer {
            margin-top:4px;
            img {
              background-image: ~"url(../style/images/Add_white_12.png)";
            }
          }
        }
        .shareGroupTitle {
          border-bottom: 1px #ddd solid;
        }
      }
      .ics-share-options {
        .shareOptionsTitle {
          border-bottom: 1px #ddd solid;
        }
        .propagation {
          input {
            margin-left: 0px;
          }
          span {
            position:relative;
            bottom: 1px;
          }
        }
      }
      span.lotusAltText.fileViewerIconText {
           position: absolute;
           right: 0px;
           top: -20px;
      }
      * {
        margin-bottom: 5px;
      }
    }

    .ics-sharing-panel .bhcPeopleTypeAhead, .ics-sharing-panel .bhcPeopleTypeAhead * {
      margin-bottom: 0;
    }

    .ics-sharing-panel div.bhcPeopleTypeAhead {
      width: 100%;
    }
  }

  .hide() {
    display: none;
  }

  .editIcon() {
    img {
      background-image: ~"url(../style/images/Edit.png)"; /*TODO*/
    }

    &:hover img, &:focus img {
      background-image: ~"url(../style/images/EditHover.png)"; /*TODO*/
    }
  }

  .ics-panel-entry {
    &.metadata {
      .icon, .remove, .footer, .actions {
        .hide;
      }
      &.metadata2 .header3 {
        .hide;
      }
      &.metadata3 {
        .header2, .header3 {
          .hide;
        }
      }
      &.metadataIcon .icon{
        display: block;
        top: 25px;
        .right(0);
        min-height: @icon-height;
        height: @icon-height;
      }
      .header1 {
        .vcard .menu_drop_icon {
          top: 7px;
          position: absolute;
        }
      }
      .header2 {
         .vcard .menu_drop_icon {
           top: 22px;
           position: absolute;
         }
      }
    }
    &.version {
      .header1 {
        width: 100%;
        .marginRight(4px);
        .menu_drop_icon {
           top: 2px;
           position: absolute;
        }
      }
      .versionNumber {
        font-size: 14px;
        color: #325c80;
        font-weight: 500;
        .marginRight(14px);
        .floatLeft;
      }
      .remove, icon {
        .hide;
      }
      .header2, .header3 {
        .marginLeft(22px);
        width: calc(100% ~"-" 22px);
      }
      .header2 {
        font-size: 11px;
        font-weight: 300;
        margin-bottom: 0;
        color: @font-color-primary;
      }
      .footer {
        padding-left: 22px;
        font-size: 12.8px;
        font-weight: 300;
        margin-bottom: 0;
        .borderBox;
        white-space: pre-wrap;
        width: 100%;
        word-wrap: break-word;
      }
      .icon {
        .hide;
      }
      .dijitProgressBarLabel {
        color: black;
      }
    }

    &.comment {
      .header1 {
        color: @font-color-link;
        font-weight: 500;
        margin-top: 0;
        margin-bottom: 0;
        .vcard .menu_drop_icon {
           top: 2px;
           position:absolute;
        }
      }
      .header2, .footer {
        font-size: 11px;
        font-weight: 300;
        margin-bottom: 0;
        color: @font-color-primary;
      }
      .header2 {
        margin-bottom: 5px;
      }
      .footer {
       font-size: 11px;
      }
      .remove, .header3 {
        .hide;
      }
      .content {
        line-height: 20px;
      }

      &.editing {
        .ics-viewer-expandable-text {
          display:none;
        }
      }
    }

    &.description{
      .content {
        line-height: 20px;
        width: 100%;
      } 
      .content div.descriptionBox {
        font-weight: bold;
      }
    }

    &.security{
      .header1, .header2, .header3 {
        white-space: normal;
        line-height: 20px;
        width: 100%;
      }
    }

    &.dropdownStream .shareLink {
      white-space: nowrap;
      .nowrapUsername;
      * {
        margin-bottom: 0;
      }
      .remove, .icon {
        .hide;
      }
      .dropdownLinkSpan {

      }
      &.ics-panel-entry {
        margin-bottom: 10px;

        &.ics-viewer-last {
          margin-bottom: 0;
        }
      }

      .header1 {
        color: @font-color-secondary;
        border-bottom: none;
        a {
          color: @font-color-secondary;
        }
      }

      ul {
        list-style-type: none;
        padding: 0;
        margin: 0;
        line-height: 21px;
      }

      .targetUser {
        color: @font-color-primary;
        clear: both;

        a {
          color: @font-color-primary;
          @-moz-document url-prefix() {
            margin-bottom: 1px;
          }
        }
      }
    }

    &.share {
      .header2, .header3, .content, .footer, .actions {
        .hide;
      }
      .remove {
        margin-top:5px;
        float: right;
        @-moz-document url-prefix() {
            margin-right: 1px;
        }
        .removeIcon {
         background-image: ~"url(../style/images/Remove.png)";
         width: 16px;
         height: 16px;
         padding:0;
           background-position: center;
           background-repeat: no-repeat;
         &:hover, &:focus {
            background-image: ~"url(../style/images/RemoveHover.png)"; /*TODO*/
          }
        }
      }
      .header1 {
        .marginLeft(10px);
        margin-top: 5px;
        text-overflow: ellipsis;
        overflow: hidden;
        white-space: nowrap;
        width: calc(100% ~"-" 75px);
        .lotusui_ie8 & {
          max-width: 177px; // This is needed to prevent the name from wrapping. TODO: Find a better way to do this
          min-width: 1px;
        }
        .vcard .menu_drop_icon {
           top: 7px;
           position:absolute;
        }
      }
      .header2 {
        .hide;
      }
      .icon {
        position: static;
        top:0;
        .right(0);
      }
      &.folder .icon {
        cursor: default;
        * {
          cursor:default;
        }
      }
    }

    &.share{
      &.unremovable {
        .remove {
          .hide;
        }
      }

      &.selected {
        background-color: @selected-color;
      }

      &.community .icon img {
        background-image: ~"url(../style/images/group.png)";
      }

      &.folder {
        .icon img {
          background-image: ~"url(../style/images/iconsFileTypes24-8bit.png)";
          background-position: 0 -30px;
          background-repeat: no-repeat;
          border-radius: 0;
          cursor: pointer;
         }

         &.shared .icon img {
           background-image: ~"url(../style/images/iconsFileTypes24-8bit.png)";
           background-position:0 -94px;
         }

         &.public .icon img {
           background-image: ~"url(../style/images/iconsFileTypes24-8bit.png)";
           background-position: 0 -62px;
         }

         /* Community folder icon is set at the bottom of the file. */
      }
    }

    .header1Action {
      position: absolute;
      .right(0);
      opacity: 0;
      transition: opacity 0.25s ease 0s;
      .hide;
    }

    &.hover .header1Action {
      opacity: 100;
    }

    .header1ActionIcon {
      width: 16px;
      height: 16px;
      margin-top: 2px;
    }

    &.tags, &.description {
      .header1Action {
        display: inline;
        .editIcon;
        @-moz-document url-prefix() {
          margin-right: 1px;
          margin-top: 1px;
        }
      }

      .header2 {
        .hide;
      }

      &.emptyContent {
        .header2 {
          display: inline;
        }
      }

      &.editing {
        .header2 {
          .hide;
        }
      }
    }

    &.dropdownStream {
      overflow: visible;
      display: inline-block;

      >.header1 {
        width: 100%;
        white-space: normal;
      }

      >.header1 > a {
        color: @font-color-primary;
      }

      >.icon {
        display: block;
        position: absolute;
        .left(-11px);
        top: 5px;
        height: 9px;
        width: 12px;
        min-height:9px;
        img {
          width:9px;
          height:21px;
          background-image: ~"url(../style/images/Twistie_right.png)";
          .dijitRtl & {
            .flipHorizontally;
          }
          &.open, .dijitRtl &.open {
            background-image: ~"url(../style/images/Twistie_down.png)";
          }
        }
      }
      .dropdownLinkSpan {
        display:none;
      }
      .remove {
        .hide;
      }

      .ics-viewer-stream {
        &.loading .streamContent {
          .hide;
        }

        .streamContent {
          border: 1px #E9E9E9 solid;

          .lotusui_ie8 & {
            border: 1px solid lightgray;
          }

          margin-top: 5px;
          padding: 12px 10px;
          cursor:auto;
          -webkit-box-shadow: 0 2px 5px #eee;
           -moz-box-shadow: #eee;
           box-shadow: 0px 2px 5px #eee;
          .name {
            margin-bottom: 5px;
            &.ics-viewer-last {
              margin-bottom: 0;
            }
            .icon {
              display: block;
              position: absolute;
              .left(auto);
              top: 0px;
              .right(0);
              img {
                width:30px;
                height:30px;
                border-radius:30px;
              }
            }
            .header1 {
              font-size: @font-size;
              color: @font-color-secondary;
            }
            a {
              color: @font-color-secondary;
            }
          }
          .name > * {
            cursor: auto;
            line-height:30px;
          }
          .name > span.header2 {
            font-size: 11px;
            font-weight: 300;
            margin-bottom: 0;
            color: #676767;
            margin-top: -10px;
          }
        }
      }
    }
    &.dropdownStream.hideLinks {
      .icon, .dropdownLink {
        display:none;
      }
      .dropdownLinkSpan {
        display:block;
      }

    }
  }

  .noselect() {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

  .ics-panel-entry {
    width: 100%;
    overflow: hidden;
    position: relative;
    margin-bottom: 20px;

    &.ics-viewer-last {
      margin-bottom: 0;
    }

    & > * {
      padding: @std-padding;
      font-size: @font-size;
      line-height: @line-height;
      font-weight: 300;
      margin: @std-margin;
      .floatLeft;
    }

    .icon {
      max-width: @icon-width;
      min-height: @std-margin + 2 * (2 * @std-padding + @line-height);
      height: @icon-height;
      position: absolute;
      .right(0);
      top: 2px;

      img {
        width: @icon-width;
        height: @icon-height;
        border-radius: @icon-width;
      }
    }

    .remove {
      padding: @std-padding 2px;
      text-align: center;
      line-height: @line-height;
      .floatLeft;
    }

    @icon-adjustment: @icon-width + 4 * (@std-padding + @std-margin);

    .header1 {
      width: calc(100% ~"-" (@icon-adjustment + @remove-width + 2 * (@std-margin + @std-padding) + 4));
    }

    .header2 {
      width: calc(100% ~"-" @icon-adjustment);
    }

    .header3, .content {
      width: calc(100% ~"-" (2 * (@std-padding + @std-margin)));
    }

    .lotusui_ie8 & {
      .header1, .header2, .header3, .content, .footer {
        min-width: @panel-width - 165px;
        max-width: 100%;
      }
    }

    .content[contenteditable=true] {
      @border-width: 1px;

      width: calc(100% ~"-" (2 * (@std-padding + @std-margin)) + 2 * @content-padding);
      padding: @content-padding;
      margin: @std-margin - @content-padding - @border-width;
      border: @border-width solid @font-color-primary;
    }

    .header1, .header2, .header3 {
      white-space: nowrap;
      .nowrapUsername;
      overflow-x: hidden;
      text-overflow: ellipsis;
      @-moz-document url-prefix() {
        .vcard .lotusPerson {
          margin-top: 1px;
          margin-bottom: 1px;
          margin-left: 1px;
        }
      }
    }

    .content {
      position: relative;
      word-wrap: break-word;

      p {
        margin: 0;
      }
    }
  .lotusImagesOff & .actions {
      padding-right: 40px;
  }
  .lotusImagesOff .dijitRtl & .actions {
    padding-right: 10px;
  }

  .lotusImagesOff & .action a, .lotusImagesOff & a.action,
   &.hover .action a, &.hover a.action {
      opacity: 100;
    }
    & .action .deleteAnchor {
      display: inline-block;
      width: 16px;
    }
    .actions {
      .floatRight;
       @-moz-document url-prefix() {
         margin-right: 1px;
       }

      img {
        width: 16px;
        height: 16px;
      }

      .restore a {
        img {
          background-image: ~"url(../style/images/Restore.png)"; /*TODO*/
        }

        &:hover img, &:focus img {
          background-image: ~"url(../style/images/RestoreHover.png)"; /*TODO*/
        }
      }

      .edit a {
        .editIcon;
      }

      .delete a {
        img {
          background-image: ~"url(../style/images/Trash.png)"; /*TODO*/
        }

        &:hover img, &:focus img {
          background-image: ~"url(../style/images/TrashHover.png)"; /*TODO*/
        }
      }

      .download a {
        img {
          background-image: ~"url(../style/images/DownloadDark.png)"; /*TODO*/
        }

        &:hover img, &:focus img {
          background-image: ~"url(../style/images/DownloadDarkHover.png)"; /*TODO*/
        }
      }

      .flag a {
        img {
          background-image: ~"url(../style/images/FlagInappropriate_16_gray.png)"; /*TODO*/
        }

        &:hover img, &:focus img {
          background-image: ~"url(../style/images/FlagInappropriate_16_blue.png)"; /*TODO*/
        }
      }

      .action {
         display: none;
         margin-left: 7px;
      }

      &.edit {
         .action.edit{
            display: inline;
         }
      }
      &.flag {
         .action.flag{
            display: inline;
         }
      }
      &.delete {
         .action.delete{
            display: inline;
         }
      }
      &.restore {
         .action.restore{
            display: inline;
         }
      }

      &.download {
         .action.download{
            display: inline;
         }
      }

      .save, .cancel {
          display: none;
      }
    }

    &.editing {
      .actions, .action {
        display: none;
      }
    }

    &.metadata {
      .header1 {
        width: calc(100% ~"-" (@remove-width + 2 * (@std-margin + @std-padding) + 10));
        font-size: 11px;
        margin-bottom: 0px;
        color: @font-color-primary;
      }

      .header2, header3 {
          // Can we just modify @icon-adjustment before we use it in the original width calculation?
        width: calc(100% ~"-" (2 * (@std-padding + @std-margin)));
        margin-top: 0px;
        margin-bottom: 0px;
        color: @font-color-secondary;
        .versionNumber {
           font-size: 14px;
           color: #325c80;
           font-weight: 500;
        }
      }
    }

    &.share {
      a {
        color: @font-color-secondary;
      }
    }
  }

  .fileState {
    line-height: 20px;
    white-space: normal;
  }

  .icon.initials {
    position: relative;
    width: @icon-width;
    height: @icon-height;

    span {
      position: absolute;
      top: (@icon-height - @line-height) / 2;
      width: 100%;
      text-align: center;
      margin: 0;
      color: @link-color;
    }
  }

  .confirmation, .confirmation-version {
    visibility: hidden;

    position: absolute;
    top: @line-height / 2;
    width: calc(100% ~"-" (2 * (@std-padding + @std-margin)));
    text-align: center;
    color: black;
    height: calc(100% ~"-" @line-height);

    & > span {
      height: 100%;
      vertical-align: middle;
      display: none;
    }

    & > div {
      display: inline-block;
    }

    a {
      padding: (@line-height / 2);
      position: relative;

      .style(@color) {
        border: 1px solid @color;
        background-color: @color;
        color: white;
        font-weight: bold;
      }

      &.good {
        .style(green);
      }

      &.bad {
        .style(red);
      }

      &.neutral {
        border: 1px solid @link-color;
        background-color: white;
      }
    }
  }

  .confirm {
    & > *, .content p {
      opacity: .5;
    }

    .confirmation {
      visibility: visible;
      opacity: 1;
      z-index: 100;

      & > span {
        display: inline-block;
      }

      a {
        opacity: 1;
      }
    }

    & .actions {
      visibility: hidden;
      transition: none;
    }
  }

  .confirm-version {
    & > *, .content p {
      opacity: .5;
    }

    .confirmation-version {
      visibility: visible;
      opacity: 1;
      z-index: 100;

      & > span {
        display: inline-block;
      }

      a {
        opacity: 1;
      }
    }

    & .actions {
      visibility: hidden;
      transition: none;
    }
  }

  ul {
   &.ics-viewer-tabs {
      list-style: none outside none;
      margin: 0;
      overflow: hidden;
      padding: 0;
      height: @banner-height;
      padding-right: 22px;

      > li {
         .floatLeft;
         .marginLeft(22px);
         margin-top: 15px;
         width: 30px;
         cursor: pointer;

         > a {
            color: #FFFFFF;
            display: block;
         }

         hr {
            margin: 7px 7px 0;
            color: #FFFFFF;
            height: 0px;
            width: 0px;
            border-top: none;
            border-right: 8px solid transparent;
            border-bottom: 8px solid #fff;
            border-left: 8px solid transparent;
            padding: 0;
            display: none;
         }

         &.selected hr {
            display: inherit;
         }

      }

      img {

         width: 20px;
         height: 20px;
         .marginLeft(5px);
         padding-bottom: 1px;
         background-position: center center;
         background-repeat: no-repeat;

      }

      .about img {
         background-image: ~"url(../style/images/about_this_file.png)";
      }

      .comments img {
         background-image: ~"url(../style/images/comments.png)";
      }

      .share img {
         background-image: ~"url(../style/images/shared_with.png)";
      }

      .version img {
         background-image: ~"url(../style/images/version_history.png)";
      }
   }
  }
  .ics-viewer-tags {
    .ics-viewer-tag {
      img {
        background-image: ~"url(../style/images/DeleteTag.png)"; /*TODO*/
      }
    }
  }

  input, textarea, select, .lotusMentionsDiv {
    background: @input-background-color;
    border: 1px solid @input-border-color;
    .borderBox;
  }
  .viewer-folder-stream {
    position: relative;
  }
  .viewer-folder-stream .ics-panel-entry.share.community .icon img {
    /* This needs to be cleaned up */
    background-image: ~"url(../style/images/iconsFileTypes24-8bit.png)" !important;
    background-position: 0 2px !important;
    background-repeat: no-repeat;
    border-radius: 0;
  }
  .viewer-folder-stream .shareFolderTitle {
    border-bottom: 1px #ddd solid;
  }

  .bhcPeopleTypeAhead input {
    background-color: @input-background-color !important;
    padding: 1px 1px 1px 10px !important;
    color: black;
  }
}

.fileviewer-panels-textnav .ics-viewer {
   .panelTitle {
      display: none !important;
   }

   .panelContent {
      padding: 32px 32px 0;
   }

   ul.ics-viewer-tabs > li {
      width: inherit; /* ??? */

      > a {
         font-size: 11px;
         font-weight: 500;
         padding: 0 5px 8px;
         text-decoration: none;
         text-transform: uppercase;

         &.wrapped {
            line-height: 12px;
            padding-bottom: 4px !important;
            text-align: center;
         }
      }
      
       @-moz-document url-prefix() {
           &.selected:focus a {
             border-bottom-width: 4px;
           }
         }

      &.selected a {
         border-bottom: 6px solid #5AAAFA;
         padding: 0 5px 8px;
      }
   }
}

.bhcPeopleTypeAhead.dijitTextBox {
   border: none !important;
   .dijitInputInner {
      border: 1px solid #bcbcbc !important;
   }
}