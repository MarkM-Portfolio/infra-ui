<!-- Copyright IBM Corp. 2015  All Rights Reserved.                    -->
<html><body><p>${head}
</p><title>Sharebox Test</title>
${script:com.ibm.social.sharebox.dialog}
${script:com.ibm.lconn.gadget.resources.iRuntimeModule}
${script:com.ibm.lconn.gadget.container._Accessor}
${script:com.ibm.lconn.gadget.container._Handle}
${script:com.ibm.lconn.gadget.container._Container}
${script:com.ibm.lconn.gadget.container.iContainer2}

${style:com.ibm.social.sharebox/css/Dialog}
${style:com.ibm.social.sharebox/css/TabContainer}
${endhead}

<script>
(function () {
   function showDialog(ctx) {
      com.ibm.social.sharebox.show(ctx);
   }
   dojo.addOnLoad(function() { 
		dojo.connect(dojo.byId("sbOpenLinkg2"), "onclick", dojo.hitch(null, showDialog, {type: "global"}));
		dojo.connect(dojo.byId("sbOpenLinkc1"), "onclick", dojo.hitch( null, showDialog, {type: "community", resourceId: "1"}));
		
		var mContainer = com.ibm.lconn.gadget.container.iContainer2;
		mContainer.init();
		
		com.ibm.social.sharebox.show();com.ibm.social.sharebox.hide();
		
		//have to use common container to work around CRE bug with preloading gadgets
		var gadgetUrl = lconn.core.url.parse(location.toString(), 'gadgets/ShareboxExample.xml').toString();
		mContainer.getCommonContainer().then(function(commonContainer){
			commonContainer.preloadGadget(gadgetUrl, function(metadata){
				console.log("Widget Preloaded: ",  metadata);
			});		
		});		
   });
   
})();
</script>

<div class="lotusMain" style="min-height:0px">
<div class="lotusContent" style="width: 1200px; height: 2000px;">
<h1>Sharebox Extension Test Page</h1>  
<a href="#" id="sbOpenLinkg2">Open Sharebox Dialog - Global</a><br>
<a href="#" id="sbOpenLinkc1">Open Sharebox Dialog - Community</a><br>
</div>
</div>
</body><p>
${end}</p></html>
